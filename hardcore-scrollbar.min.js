!function(e,t){"object"==typeof exports?module.exports=t(window,document):e.HardcoreScrollbar=t(window,document)}(this,function(s,n){var a=s.requestAnimationFrame||s.setImmediate||function(e){return setTimeout(e,0)},t=0;function e(e){for(this.target=e,this.bar='<div class="ss-track"><div class="ss-scroll"></div>',this.wrapper=n.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=n.createElement("div"),this.el.setAttribute("class","ss-content"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild.lastChild,this.track=this.target.lastChild,function(t,s){var r;function i(e){var t=e.pageY-r;r=e.pageY,a(function(){s.el.scrollTop+=t/s.scrollRatio*s.dragRatio})}function o(){t.classList.remove("ss-grabbed"),n.body.classList.remove("ss-grabbed"),n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",o)}t.addEventListener("mousedown",function(e){return r=e.pageY,t.classList.add("ss-grabbed"),n.body.classList.add("ss-grabbed"),n.addEventListener("mousemove",i),n.addEventListener("mouseup",o),!1})}(this.bar,this),this.moveBar(),this.moveHandlerBound=this.moveBar.bind(this),s.addEventListener("resize",this.moveHandlerBound),this.el.addEventListener("scroll",this.moveHandlerBound),this.el.addEventListener("mouseenter",this.moveHandlerBound),this.target.classList.add("ss-container");var t=s.getComputedStyle(e);"0px"===t.height&&"0px"!==t["max-height"]&&(e.style.height=t["max-height"]),this.observer=new MutationObserver(function(e){e.length&&this.moveBar()}.bind(this)),this.observer.observe(this.el,{childList:!0,subtree:!0}),this.destroy=function(){s.removeEventListener("resize",this.moveHandlerBound),this.el.removeEventListener("scroll",this.moveHandlerBound),this.el.removeEventListener("mouseenter",this.moveHandlerBound),this.observer.disconnect()}.bind(this)}e.prototype={moveBar:function(){var e=this.el.scrollHeight,t=this.el.clientHeight;this.scrollRatio=t/e,this.dragRatio=this.wrapper.clientHeight/this.track.clientHeight;var s=this,r=-1*(s.target.clientWidth-s.bar.clientWidth);a(function(){1<=s.scrollRatio?s.bar.classList.add("ss-hidden"):(s.bar.classList.remove("ss-hidden"),s.bar.style.cssText="height:"+100*s.scrollRatio+"%; top:"+s.el.scrollTop/e*100+"%;right:"+r+"px;")})}},e.attach=function(e){if(Object.prototype.hasOwnProperty.call(e,"data-hardcore-scrollbar"))return e["data-hardcore-scrollbar"];var t=new r(e);return Object.defineProperty(e,"data-hardcore-scrollbar",{value:t}),t},a(function(){var e='<div id="___hardcrore_test_node" style="width:5em;height:5em;overflow:scroll;position:absolute;top:-1000em;left:-1000em;z-index:1000000;"><div></div></div>';n.body.insertAdjacentHTML("beforeend",e),e=n.querySelector("#___hardcrore_test_node"),t=e.offsetWidth-e.clientWidth,console.log(t),e.parentNode.removeChild(e),a(function(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),n.head.appendChild(e),e.sheet.insertRule(".ss-content { width: calc(100% + "+t+"px); }",0)})});var r=e;return r});